<% layout('layout') -%>

<head>
   <script src="http://ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
   <script src="/js/profilePage.js" type="text/javascript" charset="utf-8"></script>
   <link href="/css/monokai.css" rel="stylesheet" type="text/css">
   <!-- <script src="/js/languages/rainbow.js" type="text/javascript" charset="utf-8" ></script> -->
   <script src="/js/languages/rainbow-custom.min.js" type="text/javascript" charset="utf-8" ></script>
   <!-- <script src="/js/languages/python.js" type="text/javascript" charset="utf-8" ></script> -->
   <!-- <script src="/js/languages/c.js" type="text/javascript" charset="utf-8" ></script> -->
</head>

<div class="container">

  <div class="row">
    <div class="col-sm-6 col-md-4">
      <img class="img-circle img-responsive img-center" src="<%= user.profile.picture %>" alt ="">

      <br/>
<h4>Name: <%= user.profile.name %></h4>
<h4> Email: <%= user.email %></h4>
</div>
<div class="col-md-8">
  <h2 class="text-center">History</h2>
  <table class="table table-striped sticky-header">
    <thead>
      <tr>
        <th>Code's Name</th>
        <th>Language</th>
        <th>Date and Time</th>
      </tr>
      <tbody>

        <% for(var i = user.history.length-1; i>=0; i--) {%>
          <tr>

            <% for( var j=0; j<templates.length;j++) {
              if(templates[j]._id.equals(user.history[i]._id)){ %>


      <!--  <td><a href=" " id="btnTest"><%= user.history[i].templateName %></a></td> -->
      <!--  <td> <input type="button" id ="btnTest"  value="<%= user.history[i].templateName %>"/> </td> -->
        <td><a type="button" class="open-profileDialog btn" data-toggle="modal" data-id="<%= templates[j].name %>" data-lang="<%= templates[j].language %>" data-whatever="<%=templates[j].code%>" href="#profilebox"><%= templates[j].name %></a></td>
                 <td><%= templates[j].language %></td>
                <td><%= user.history[i]._id.getTimestamp() %></td>

                <% }
                } %>
                <div  id="profilebox" class="modal fade" role="dialog" aria-hidden="true">
                    <div class="modal-dialog">
                        <div class="modal-content">
                            <div class="modal-header">
                                     <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                                  <b>Head</b>
                            </div>
                             <div class="modal-body">



                                  <pre id = 'test'>
                                    <code id="codearea"  data-language="c">

                                  </code>
                                </pre>


                            </div>
                             <div class="modal-footer">
                                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                            </div>
                        </div>
                    </div>
                </div>


           </tr>

     <% } %>



   </tbody>
  </thead>
  </table>

</div>

</div>
</div>
